<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> SCADA Architecture Explorer</title>
    <style>
        :root {
            --level-3: #e3f2fd;
            --level-2: #e8f5e9;
            --level-1: #fff3e0;
            --level-0: #fce4ec;
            --focus-ring: #005fcc; /* High contrast focus color */
        }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; background: #f4f4f9; display: flex; gap: 20px; flex-wrap: wrap; }
        
        /* High Contrast Focus States for Accessibility */
        button:focus {
            outline: 3px solid var(--focus-ring);
            outline-offset: 2px;
        }

        .diagram-container { flex: 2; min-width: 300px; display: flex; flex-direction: column; gap: 15px; }
        .info-panel { flex: 1; min-width: 300px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-left: 5px solid #2196F3; }
        
        .purdue-level { border: 2px solid #757575; padding: 20px 15px 15px 15px; border-radius: 8px; position: relative; margin-bottom: 10px; }
        .level-header { position: absolute; top: -12px; left: 15px; background: #333; color: white; padding: 4px 10px; font-size: 0.9rem; border-radius: 4px; font-weight: bold; }
        
        #lvl-3 { background-color: var(--level-3); }
        #lvl-2 { background-color: var(--level-2); }
        #lvl-1 { background-color: var(--level-1); }
        #lvl-0 { background-color: var(--level-0); }

        .component-row { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 5px; }
        
        /* Changing Divs to Buttons for Accessibility */
        .device-btn {
            width: 140px; min-height: 80px;
            background: white; border: 2px solid #333;
            display: flex; align-items: center; justify-content: center;
            text-align: center; font-weight: bold; font-size: 1rem;
            cursor: pointer; border-radius: 6px; 
            color: #000; /* Ensure high contrast */
            box-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }
        .device-btn:hover { background: #f0f0f0; transform: translateY(-2px); }
        .device-btn[aria-pressed="true"] { 
            background: #2196F3; color: white; border-color: #004ba0; 
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.2);
        }

        .line { height: 15px; border-left: 3px dashed #333; margin: 0 auto; width: 0; }
        .risk-box { background: #ffebee; border: 1px solid #c62828; padding: 15px; border-radius: 4px; margin-top: 15px; color: #b71c1c; }
    </style>
</head>
<body>

    <main class="diagram-container">
        <h1>ICS/SCADA Architecture </h1>
        <p>Instructions: Use <b>Tab</b> to move between devices. Press <b>Enter</b> or <b>Space</b> to select a device. Details will appear in the panel to the right.</p>

        <section id="lvl-3" class="purdue-level" aria-labelledby="label-lvl3">
            <span id="label-lvl3" class="level-header">Level 3: Operations Management</span>
            <div class="component-row">
                <button class="device-btn" onclick="updateInfo('historian', this)">Data Historian</button>
                <button class="device-btn" onclick="updateInfo('scada-server', this)">SCADA Server (MTU)</button>
            </div>
        </section>

        <div class="line" aria-hidden="true"></div>

        <section id="lvl-2" class="purdue-level" aria-labelledby="label-lvl2">
            <span id="label-lvl2" class="level-header">Level 2: Supervisory Control</span>
            <div class="component-row">
                <button class="device-btn" onclick="updateInfo('hmi', this)">Human Machine Interface</button>
                <button class="device-btn" onclick="updateInfo('eng-workstation', this)">Engineering Workstation</button>
            </div>
        </section>

        <div class="line" aria-hidden="true"></div>

        <section id="lvl-1" class="purdue-level" aria-labelledby="label-lvl1">
            <span id="label-lvl1" class="level-header">Level 1: Local Control</span>
            <div class="component-row">
                <button class="device-btn" onclick="updateInfo('plc', this)">PLC / RTU</button>
                <button class="device-btn" onclick="updateInfo('ied', this)">IED (Relay)</button>
            </div>
        </section>

        <div class="line" aria-hidden="true"></div>

        <section id="lvl-0" class="purdue-level" aria-labelledby="label-lvl0">
            <span id="label-lvl0" class="level-header">Level 0: Field Devices</span>
            <div class="component-row">
                <button class="device-btn" onclick="updateInfo('sensor', this)">Sensors</button>
                <button class="device-btn" onclick="updateInfo('actuator', this)">Actuators</button>
            </div>
        </section>
    </main>

    <aside class="info-panel" aria-live="polite" aria-atomic="true">
        <h2 id="info-title">Select a Component</h2>
        <div id="info-content">
            <p>Select a block in the diagram to identify the component, understand its role, and learn about vulnerabilities.</p>
        </div>
    </aside>

    <script>
        const data = {
            'historian': {
                title: "Data Historian",
                desc: "A centralized database that stores historical process data (temperature, pressure, flow rates) for analysis and auditing.",
                risk: "<strong>Risk:</strong> Often dual-homed (connected to both IT and OT networks), making it a pivot point for attackers."
            },
            'scada-server': {
                title: "SCADA Server (MTU)",
                desc: "The Master Terminal Unit. It acts as the 'brain,' polling PLCs for data and sending high-level commands.",
                risk: "<strong>Risk:</strong> If compromised, an attacker has full control over the process."
            },
            'hmi': {
                title: "Human Machine Interface (HMI)",
                desc: "A graphical dashboard that operators use to monitor the process and adjust setpoints.",
                risk: "<strong>Risk:</strong> Attackers can trick operators by displaying false data (e.g., showing a tank is empty when it is overflowing)."
            },
            'eng-workstation': {
                title: "Engineering Workstation",
                desc: "A laptop or PC used to program PLCs and configure the control system.",
                risk: "<strong>Risk:</strong> Contains logic files. If infected, it can push malicious firmware to controllers (like in Stuxnet)."
            },
            'plc': {
                title: "PLC (Programmable Logic Controller)",
                desc: "Ruggedized industrial computer that directly monitors inputs and controls outputs.",
                risk: "<strong>Risk:</strong> Many older PLCs accept any command sent to them without authentication."
            },
            'ied': {
                title: "IED (Intelligent Electronic Device)",
                desc: "Smart device found in power grids that can issue protection commands, like tripping a breaker.",
                risk: "<strong>Risk:</strong> Susceptible to protocol-based attacks (DNP3/IEC 61850) causing blackouts."
            },
            'sensor': {
                title: "Sensors (Input)",
                desc: "Devices that measure physical properties (Temperature, Pressure, Flow).",
                risk: "<strong>Risk:</strong> Signal spoofing. Feeding false data to the PLC."
            },
            'actuator': {
                title: "Actuators (Output)",
                desc: "Motors, pumps, and valves that perform physical work.",
                risk: "<strong>Risk:</strong> Rapid cycling can cause physical damage, fire, or explosion."
            }
        };

        function updateInfo(key, btnElement) {
            // Update Text
            const info = data[key];
            document.getElementById('info-title').innerText = info.title;
            document.getElementById('info-content').innerHTML = `
                <p>${info.desc}</p>
                <div class="risk-box">${info.risk}</div>
            `;

            // Accessibility: Manage focus state
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.setAttribute('aria-pressed', 'false');
            });
            btnElement.setAttribute('aria-pressed', 'true');
        }
    </script>
</body>
</html>
